<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>epd4in2.py</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>epd4in2.py
</h1>
<div class='paths'>
vendor/waveshare_epd/epd4in2.py
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2020-04-02 15:37:35 -0700</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p># ***************************************************************************** # * | File        :       epd4in2.py # * | Author      :   Waveshare team # * | Function    :   Electronic paper driver # * | Info        : # *—————- # * | This version:   V4.0 # * | Date        :   2019-06-20 # # | Info        :   python demo # —————————————————————————– # Permission is hereby granted, free of charge, to any person obtaining a copy # of this software and associated documnetation files (the “Software”), to deal # in the Software without restriction, including without limitation the rights # to use, copy, modify, merge, publish, distribute, sublicense, and/or sell # copies of the Software, and to permit persons to  whom the Software is # furished to do so, subject to the following conditions: # # The above copyright notice and this permission notice shall be included in # all copies or substantial portions of the Software. # # THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR # IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, # FITNESS OR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER # LIABILITY WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN # THE SOFTWARE. #</p>

<p>import logging from . import epdconfig from PIL import Image import RPi.GPIO as GPIO</p>

<p># Display resolution EPD_WIDTH       = 400 EPD_HEIGHT      = 300</p>

<p>GRAY1  = 0xff white GRAY2  = 0xC0 GRAY3  = 0x80 gray GRAY4  = 0x00 #Blackest</p>

<p>class EPD:</p>

<pre>def __init__(self):&#x000A;    self.reset_pin = epdconfig.RST_PIN&#x000A;    self.dc_pin = epdconfig.DC_PIN&#x000A;    self.busy_pin = epdconfig.BUSY_PIN&#x000A;    self.cs_pin = epdconfig.CS_PIN&#x000A;    self.width = EPD_WIDTH&#x000A;    self.height = EPD_HEIGHT&#x000A;    self.GRAY1  = GRAY1 #white&#x000A;    self.GRAY2  = GRAY2&#x000A;    self.GRAY3  = GRAY3 #gray&#x000A;    self.GRAY4  = GRAY4 #Blackest&#x000A;lut_vcom0 = [&#x000A;0x00, 0x17, 0x00, 0x00, 0x00, 0x02,        &#x000A;0x00, 0x17, 0x17, 0x00, 0x00, 0x02,        &#x000A;0x00, 0x0A, 0x01, 0x00, 0x00, 0x01,        &#x000A;0x00, 0x0E, 0x0E, 0x00, 0x00, 0x02,        &#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,        &#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,        &#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;]&#x000A;lut_ww = [&#x000A;0x40, 0x17, 0x00, 0x00, 0x00, 0x02,&#x000A;0x90, 0x17, 0x17, 0x00, 0x00, 0x02,&#x000A;0x40, 0x0A, 0x01, 0x00, 0x00, 0x01,&#x000A;0xA0, 0x0E, 0x0E, 0x00, 0x00, 0x02,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;]&#x000A;lut_bw = [&#x000A;0x40, 0x17, 0x00, 0x00, 0x00, 0x02,&#x000A;0x90, 0x17, 0x17, 0x00, 0x00, 0x02,&#x000A;0x40, 0x0A, 0x01, 0x00, 0x00, 0x01,&#x000A;0xA0, 0x0E, 0x0E, 0x00, 0x00, 0x02,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;]&#x000A;lut_wb = [&#x000A;0x80, 0x17, 0x00, 0x00, 0x00, 0x02,&#x000A;0x90, 0x17, 0x17, 0x00, 0x00, 0x02,&#x000A;0x80, 0x0A, 0x01, 0x00, 0x00, 0x01,&#x000A;0x50, 0x0E, 0x0E, 0x00, 0x00, 0x02,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;]&#x000A;lut_bb = [&#x000A;0x80, 0x17, 0x00, 0x00, 0x00, 0x02,&#x000A;0x90, 0x17, 0x17, 0x00, 0x00, 0x02,&#x000A;0x80, 0x0A, 0x01, 0x00, 0x00, 0x01,&#x000A;0x50, 0x0E, 0x0E, 0x00, 0x00, 0x02,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;0x00, 0x00, 0x00, 0x00, 0x00, 0x00,&#x000A;]&#x000A;&#x000A;#******************************gray*********************************/&#x000A;#0~3 gray&#x000A;EPD_4IN2_4Gray_lut_vcom =[&#x000A;0x00        ,0x0A   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x60        ,0x14   ,0x14   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x14   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x13   ,0x0A   ,0x01   ,0x00   ,0x01,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00&#x000A;]&#x000A;#R21&#x000A;EPD_4IN2_4Gray_lut_ww =[&#x000A;0x40        ,0x0A   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x90        ,0x14   ,0x14   ,0x00   ,0x00   ,0x01,&#x000A;0x10        ,0x14   ,0x0A   ,0x00   ,0x00   ,0x01,&#x000A;0xA0        ,0x13   ,0x01   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;]&#x000A;#R22H       r&#x000A;EPD_4IN2_4Gray_lut_bw =[&#x000A;0x40        ,0x0A   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x90        ,0x14   ,0x14   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x14   ,0x0A   ,0x00   ,0x00   ,0x01,&#x000A;0x99        ,0x0C   ,0x01   ,0x03   ,0x04   ,0x01,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;]&#x000A;#R23H       w&#x000A;EPD_4IN2_4Gray_lut_wb =[&#x000A;0x40        ,0x0A   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x90        ,0x14   ,0x14   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x14   ,0x0A   ,0x00   ,0x00   ,0x01,&#x000A;0x99        ,0x0B   ,0x04   ,0x04   ,0x01   ,0x01,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;]&#x000A;#R24H       b&#x000A;EPD_4IN2_4Gray_lut_bb =[&#x000A;0x80        ,0x0A   ,0x00   ,0x00   ,0x00   ,0x01,&#x000A;0x90        ,0x14   ,0x14   ,0x00   ,0x00   ,0x01,&#x000A;0x20        ,0x14   ,0x0A   ,0x00   ,0x00   ,0x01,&#x000A;0x50        ,0x13   ,0x01   ,0x00   ,0x00   ,0x01,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;0x00        ,0x00   ,0x00   ,0x00   ,0x00   ,0x00,&#x000A;]&#x000A;&#x000A;# Hardware reset&#x000A;def reset(self):&#x000A;    epdconfig.digital_write(self.reset_pin, 1)&#x000A;    epdconfig.delay_ms(200) &#x000A;    epdconfig.digital_write(self.reset_pin, 0)&#x000A;    epdconfig.delay_ms(10)&#x000A;    epdconfig.digital_write(self.reset_pin, 1)&#x000A;    epdconfig.delay_ms(200)   &#x000A;&#x000A;def send_command(self, command):&#x000A;    epdconfig.digital_write(self.dc_pin, 0)&#x000A;    epdconfig.digital_write(self.cs_pin, 0)&#x000A;    epdconfig.spi_writebyte([command])&#x000A;    epdconfig.digital_write(self.cs_pin, 1)&#x000A;&#x000A;def send_data(self, data):&#x000A;    epdconfig.digital_write(self.dc_pin, 1)&#x000A;    epdconfig.digital_write(self.cs_pin, 0)&#x000A;    epdconfig.spi_writebyte([data])&#x000A;    epdconfig.digital_write(self.cs_pin, 1)&#x000A;&#x000A;def ReadBusy(self):&#x000A;    self.send_command(0x71)&#x000A;    while(epdconfig.digital_read(self.busy_pin) == 0):      # 0: idle, 1: busy&#x000A;        self.send_command(0x71)&#x000A;        epdconfig.delay_ms(100)    &#x000A;&#x000A;def set_lut(self):&#x000A;    self.send_command(0x20)               # vcom&#x000A;    for count in range(0, 44):&#x000A;        self.send_data(self.lut_vcom0[count])&#x000A;&#x000A;    self.send_command(0x21)         # ww --&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.lut_ww[count])&#x000A;&#x000A;    self.send_command(0x22)         # bw r&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.lut_bw[count])&#x000A;&#x000A;    self.send_command(0x23)         # wb w&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.lut_bb[count])&#x000A;&#x000A;    self.send_command(0x24)         # bb b&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.lut_wb[count])&#x000A;&#x000A;def Gray_SetLut(self):&#x000A;    self.send_command(0x20)                                         #vcom&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_vcom[count]) &#x000A;&#x000A;    self.send_command(0x21)                                         #red not use&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_ww[count]) &#x000A;&#x000A;    self.send_command(0x22)                                                 #bw r&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_bw[count]) &#x000A;&#x000A;    self.send_command(0x23)                                                 #wb w&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_wb[count]) &#x000A;&#x000A;    self.send_command(0x24)                          #bb b&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_bb[count]) &#x000A;&#x000A;    self.send_command(0x25)                                         #vcom&#x000A;    for count in range(0, 42):&#x000A;        self.send_data(self.EPD_4IN2_4Gray_lut_ww[count])&#x000A;&#x000A;def init(self):&#x000A;    if (epdconfig.module_init() != 0):&#x000A;        return -1&#x000A;    # EPD hardware init start&#x000A;    self.reset()&#x000A;&#x000A;    self.send_command(0x01) # POWER SETTING&#x000A;    self.send_data(0x03) # VDS_EN, VDG_EN&#x000A;    self.send_data(0x00) # VCOM_HV, VGHL_LV[1], VGHL_LV[0]&#x000A;    self.send_data(0x2b) # VDH&#x000A;    self.send_data(0x2b) # VDL&#x000A;&#x000A;    self.send_command(0x06) # boost soft start&#x000A;    self.send_data(0x17)&#x000A;    self.send_data(0x17)&#x000A;    self.send_data(0x17)&#x000A;&#x000A;    self.send_command(0x04) # POWER_ON&#x000A;    self.ReadBusy()&#x000A;&#x000A;    self.send_command(0x00) # panel setting&#x000A;    self.send_data(0xbf) # KW-BF   KWR-AF  BWROTP 0f&#x000A;    self.send_data(0x0d)&#x000A;&#x000A;    self.send_command(0x30) # PLL setting&#x000A;    self.send_data(0x3c) # 3A 100HZ   29 150Hz 39 200HZ  31 171HZ&#x000A;&#x000A;    self.send_command(0x61) # resolution setting&#x000A;    self.send_data(0x01)&#x000A;    self.send_data(0x90) # 128&#x000A;    self.send_data(0x01)            &#x000A;    self.send_data(0x2c)&#x000A;&#x000A;    self.send_command(0x82) # vcom_DC setting&#x000A;    self.send_data(0x28)&#x000A;&#x000A;    self.send_command(0X50) # VCOM AND DATA INTERVAL SETTING&#x000A;    self.send_data(0x97) # 97white border 77black border            VBDF 17|D7 VBDW 97 VBDB 57              VBDF F7 VBDW 77 VBDB 37  VBDR B7&#x000A;&#x000A;    self.set_lut()&#x000A;    # EPD hardware init end&#x000A;    return 0&#x000A;&#x000A;def Init_4Gray(self):&#x000A;    if (epdconfig.module_init() != 0):&#x000A;        return -1&#x000A;    # EPD hardware init start&#x000A;    self.reset()&#x000A;&#x000A;    self.send_command(0x01)                 #POWER SETTING&#x000A;    self.send_data (0x03)&#x000A;    self.send_data (0x00)       #VGH=20V,VGL=-20V&#x000A;    self.send_data (0x2b)           #VDH=15V                                                                                                                         &#x000A;    self.send_data (0x2b)           #VDL=-15V&#x000A;    self.send_data (0x13)&#x000A;&#x000A;    self.send_command(0x06)         #booster soft start&#x000A;    self.send_data (0x17)           #A&#x000A;    self.send_data (0x17)           #B&#x000A;    self.send_data (0x17)           #C &#x000A;&#x000A;    self.send_command(0x04)&#x000A;    self.ReadBusy()&#x000A;&#x000A;    self.send_command(0x00)                 #panel setting&#x000A;    self.send_data(0x3f)            #KW-3f   KWR-2F BWROTP 0f       BWOTP 1f&#x000A;&#x000A;    self.send_command(0x30)                 #PLL setting&#x000A;    self.send_data (0x3c)           #100hz &#x000A;&#x000A;    self.send_command(0x61)                 #resolution setting&#x000A;    self.send_data (0x01)           #400&#x000A;    self.send_data (0x90)            &#x000A;    self.send_data (0x01)           #300&#x000A;    self.send_data (0x2c)&#x000A;&#x000A;    self.send_command(0x82)                 #vcom_DC setting&#x000A;    self.send_data (0x12)&#x000A;&#x000A;    self.send_command(0X50)                 #VCOM AND DATA INTERVAL SETTING                 &#x000A;    self.send_data(0x97)&#x000A;&#x000A;def getbuffer(self, image):&#x000A;    # logging.debug(&quot;bufsiz = &quot;,int(self.width/8) * self.height)&#x000A;    buf = [0xFF] * (int(self.width/8) * self.height)&#x000A;    image_monocolor = image.convert(&#39;1&#39;)&#x000A;    imwidth, imheight = image_monocolor.size&#x000A;    pixels = image_monocolor.load()&#x000A;    # logging.debug(&quot;imwidth = %d, imheight = %d&quot;,imwidth,imheight)&#x000A;    if(imwidth == self.width and imheight == self.height):&#x000A;        logging.debug(&quot;Horizontal&quot;)&#x000A;        for y in range(imheight):&#x000A;            for x in range(imwidth):&#x000A;                # Set the bits for the column of pixels at the current position.&#x000A;                if pixels[x, y] == 0:&#x000A;                    buf[int((x + y * self.width) / 8)] &amp;= ~(0x80 &gt;&gt; (x % 8))&#x000A;    elif(imwidth == self.height and imheight == self.width):&#x000A;        logging.debug(&quot;Vertical&quot;)&#x000A;        for y in range(imheight):&#x000A;            for x in range(imwidth):&#x000A;                newx = y&#x000A;                newy = self.height - x - 1&#x000A;                if pixels[x, y] == 0:&#x000A;                    buf[int((newx + newy*self.width) / 8)] &amp;= ~(0x80 &gt;&gt; (y % 8))&#x000A;    return buf&#x000A;&#x000A;def getbuffer_4Gray(self, image):&#x000A;    # logging.debug(&quot;bufsiz = &quot;,int(self.width/8) * self.height)&#x000A;    buf = [0xFF] * (int(self.width / 4) * self.height)&#x000A;    image_monocolor = image.convert(&#39;L&#39;)&#x000A;    imwidth, imheight = image_monocolor.size&#x000A;    pixels = image_monocolor.load()&#x000A;    i=0&#x000A;    # logging.debug(&quot;imwidth = %d, imheight = %d&quot;,imwidth,imheight)&#x000A;    if(imwidth == self.width and imheight == self.height):&#x000A;        logging.debug(&quot;Vertical&quot;)&#x000A;        for y in range(imheight):&#x000A;            for x in range(imwidth):&#x000A;                # Set the bits for the column of pixels at the current position.&#x000A;                if(pixels[x, y] == 0xC0):&#x000A;                    pixels[x, y] = 0x80&#x000A;                elif (pixels[x, y] == 0x80):&#x000A;                    pixels[x, y] = 0x40&#x000A;                i= i+1&#x000A;                if(i%4 == 0):&#x000A;                    buf[int((x + (y * self.width))/4)] = ((pixels[x-3, y]&amp;0xc0) | (pixels[x-2, y]&amp;0xc0)&gt;&gt;2 | (pixels[x-1, y]&amp;0xc0)&gt;&gt;4 | (pixels[x, y]&amp;0xc0)&gt;&gt;6)&#x000A;&#x000A;    elif(imwidth == self.height and imheight == self.width):&#x000A;        logging.debug(&quot;Horizontal&quot;)&#x000A;        for x in range(imwidth):&#x000A;            for y in range(imheight):&#x000A;                newx = y&#x000A;                newy = x&#x000A;                if(pixels[x, y] == 0xC0):&#x000A;                    pixels[x, y] = 0x80&#x000A;                elif (pixels[x, y] == 0x80):&#x000A;                    pixels[x, y] = 0x40&#x000A;                i= i+1&#x000A;                if(i%4 == 0):&#x000A;                    buf[int((newx + (newy * self.width))/4)] = ((pixels[x, y-3]&amp;0xc0) | (pixels[x, y-2]&amp;0xc0)&gt;&gt;2 | (pixels[x, y-1]&amp;0xc0)&gt;&gt;4 | (pixels[x, y]&amp;0xc0)&gt;&gt;6) &#x000A;&#x000A;    return buf&#x000A;&#x000A;def display(self, image):&#x000A;    self.send_command(0x10)&#x000A;    for i in range(0, int(self.width * self.height / 8)):&#x000A;        self.send_data(0xFF)&#x000A;&#x000A;    self.send_command(0x13)&#x000A;    for i in range(0, int(self.width * self.height / 8)):&#x000A;        self.send_data(image[i])&#x000A;&#x000A;    self.send_command(0x12) &#x000A;    self.ReadBusy()&#x000A;&#x000A;def display_4Gray(self, image):&#x000A;    self.send_command(0x10)&#x000A;    for i in range(0, EPD_WIDTH * EPD_HEIGHT / 8):                   # EPD_WIDTH * EPD_HEIGHT / 4&#x000A;        temp3=0&#x000A;        for j in range(0, 2):&#x000A;            temp1 = image[i*2+j]&#x000A;            for k in range(0, 2):&#x000A;                temp2 = temp1&amp;0xC0 &#x000A;                if(temp2 == 0xC0):&#x000A;                    temp3 |= 0x01#white&#x000A;                elif(temp2 == 0x00):&#x000A;                    temp3 |= 0x00  #black&#x000A;                elif(temp2 == 0x80): &#x000A;                    temp3 |= 0x01  #gray1&#x000A;                else: #0x40&#x000A;                    temp3 |= 0x00 #gray2&#x000A;                temp3 &lt;&lt;= 1 &#x000A;&#x000A;                temp1 &lt;&lt;= 2&#x000A;                temp2 = temp1&amp;0xC0 &#x000A;                if(temp2 == 0xC0):  #white&#x000A;                    temp3 |= 0x01&#x000A;                elif(temp2 == 0x00): #black&#x000A;                    temp3 |= 0x00&#x000A;                elif(temp2 == 0x80):&#x000A;                    temp3 |= 0x01 #gray1&#x000A;                else :   #0x40&#x000A;                        temp3 |= 0x00       #gray2  &#x000A;                if(j!=1 or k!=1):                           &#x000A;                    temp3 &lt;&lt;= 1&#x000A;                temp1 &lt;&lt;= 2&#x000A;        self.send_data(temp3)&#x000A;&#x000A;    self.send_command(0x13)     &#x000A;&#x000A;    for i in range(0, EPD_WIDTH * EPD_HEIGHT / 8):                #5808*4  46464&#x000A;        temp3=0&#x000A;        for j in range(0, 2):&#x000A;            temp1 = image[i*2+j]&#x000A;            for k in range(0, 2):&#x000A;                temp2 = temp1&amp;0xC0 &#x000A;                if(temp2 == 0xC0):&#x000A;                    temp3 |= 0x01#white&#x000A;                elif(temp2 == 0x00):&#x000A;                    temp3 |= 0x00  #black&#x000A;                elif(temp2 == 0x80):&#x000A;                    temp3 |= 0x00  #gray1&#x000A;                else: #0x40&#x000A;                    temp3 |= 0x01 #gray2&#x000A;                temp3 &lt;&lt;= 1 &#x000A;&#x000A;                temp1 &lt;&lt;= 2&#x000A;                temp2 = temp1&amp;0xC0 &#x000A;                if(temp2 == 0xC0):  #white&#x000A;                    temp3 |= 0x01&#x000A;                elif(temp2 == 0x00): #black&#x000A;                    temp3 |= 0x00&#x000A;                elif(temp2 == 0x80):&#x000A;                    temp3 |= 0x00 #gray1&#x000A;                else:    #0x40&#x000A;                        temp3 |= 0x01       #gray2&#x000A;                if(j!=1 or k!=1):                                   &#x000A;                    temp3 &lt;&lt;= 1&#x000A;                temp1 &lt;&lt;= 2&#x000A;        self.send_data(temp3)&#x000A;&#x000A;    self.Gray_SetLut()&#x000A;    self.send_command(0x12)&#x000A;    epdconfig.delay_ms(200)&#x000A;    self.ReadBusy()&#x000A;    # pass&#x000A;&#x000A;def Clear(self):&#x000A;    self.send_command(0x10)&#x000A;    for i in range(0, int(self.width * self.height / 8)):&#x000A;        self.send_data(0xFF)&#x000A;&#x000A;    self.send_command(0x13)&#x000A;    for i in range(0, int(self.width * self.height / 8)):&#x000A;        self.send_data(0xFF)&#x000A;&#x000A;    self.send_command(0x12) &#x000A;    self.ReadBusy()&#x000A;&#x000A;def sleep(self):&#x000A;    self.send_command(0x02) # POWER_OFF&#x000A;    self.ReadBusy()&#x000A;    self.send_command(0x07) # DEEP_SLEEP&#x000A;    self.send_data(0XA5)&#x000A;&#x000A;    epdconfig.module_exit()</pre>

<p>### END OF FILE ###</p>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
