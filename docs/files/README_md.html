<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>README.md</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>README.md
</h1>
<div class='paths'>
README.md
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2020-06-04 00:54:57 -0700</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-Inkblot"><a href="../classes/Inkblot.html"><code>Inkblot</code></a><span><a href="#label-Inkblot">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="../classes/Inkblot.html"><code>Inkblot</code></a> is a gem for interacting with Waveshare&#39;s line of E-paper displays on the Raspberry Pi using ruby. It includes components for outputting images, text, and menus to the EPD as well as reading input from HAT buttons on the side.</p>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Add this line to your application&#39;s Gemfile:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;inkblot&#39;</span>, <span class="ruby-value">github:</span> <span class="ruby-string">&#39;jtp184/inkblot&#39;</span></pre>

<p>You can also download and install it globally with</p>

<pre>git clone https://github.com/jtp184/inkblot.git&#x000A;cd inkblot&#x000A;rake install</pre>

<h2 id="label-Hardware">Hardware<span><a href="#label-Hardware">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>This gem was developed using Waveshare&#39;s <a href="https://www.waveshare.com/wiki/2.7inch_e-Paper_HAT">2.7 inch e-Paper HAT</a> on the Raspberry Pi 3+ and 4. Component aspect ratios and button pinouts are based on this screen size, but you can override them with module level writers. Be sure to set these before using any of the relevant functions.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span>.<span class="ruby-identifier">screen_size</span> <span class="ruby-comment"># =&gt; Defaults to { width: 264, height: 176 }</span>&#x000A;<span class="ruby-constant">Inkblot</span>.<span class="ruby-identifier">screen_size</span> = { <span class="ruby-value">width:</span> <span class="ruby-value">200</span>, <span class="ruby-value">height:</span> <span class="ruby-value">200</span> }&#x000A;&#x000A;<span class="ruby-constant">Inkblot</span>.<span class="ruby-identifier">button_pinout</span> <span class="ruby-comment"># =&gt; Defaults to [5, 6, 13, 19]</span>&#x000A;<span class="ruby-constant">Inkblot</span>.<span class="ruby-identifier">button_pinout</span> = [<span class="ruby-value">6</span>, <span class="ruby-value">11</span>, <span class="ruby-value">12</span>, <span class="ruby-value">14</span>] <span class="ruby-comment"># Uses different pins</span></pre>

<h2 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Documentation">Documentation<span><a href="#label-Documentation">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>All methods and classes are RDoc documented at <a href="https://jtp184.github.io/inkblot">jtp184.github.io/inkblot</a>/</p>

<h3 id="label-Display">Display<span><a href="#label-Display">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The <code>Display</code> class handles outputting to the screen. It accepts an argument to its <code>.show</code> method to output to the screen, which can be any number of displayable objects.</p>

<pre class="ruby"><span class="ruby-identifier">items</span> = []&#x000A;&#x000A;<span class="ruby-comment"># Primarily used to display Components and Converters</span>&#x000A;<span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&#39;Hello&#39;</span>)&#x000A;<span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">ImageConverter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">path:</span> <span class="ruby-string">&#39;/home/pi/img.png&#39;</span>)&#x000A;<span class="ruby-comment"># Can also display (already correct bmp) files directly or by path</span>&#x000A;<span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;/home/pi/bump.bmp&#39;</span>) <span class="ruby-comment"># Or a TempFile</span>&#x000A;<span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;/home/pi/bump.bmp&#39;</span>&#x000A;&#x000A;<span class="ruby-comment"># call, show, and [] all work</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">items</span>[<span class="ruby-value">0</span>])&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">show</span>(<span class="ruby-identifier">items</span>[<span class="ruby-value">1</span>])&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>[<span class="ruby-identifier">items</span>[<span class="ruby-value">2</span>]]&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.(<span class="ruby-identifier">items</span>[<span class="ruby-value">3</span>])&#x000A;&#x000A;<span class="ruby-comment"># Plaintext also works</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.(<span class="ruby-string">&quot;Show Me&quot;</span>)</pre>

<p>One of the easiest ways to start using <a href="../classes/Inkblot.html"><code>Inkblot</code></a> is to add a <code>#to_display</code> method on your object which returns a component.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">SomethingToShow</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">smth</span>)&#x000A;    <span class="ruby-ivar">@something</span> = <span class="ruby-identifier">smth</span>.<span class="ruby-identifier">to_s</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_display</span>&#x000A;    <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-ivar">@something</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">show</span>(<span class="ruby-constant">SomethingToShow</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cinnamon Buns&quot;</span>))</pre>

<h3 id="label-Buttons">Buttons<span><a href="#label-Buttons">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The <code>Buttons</code> class deals with input from the HAT buttons. The buttons communicate over the Pi&#39;s GPIO pins, and can be used for a broad variety of inputs.</p>

<pre class="ruby"><span class="ruby-comment"># Setting up the buttons for use. This only needs to be run once at the start</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">init</span>&#x000A;<span class="ruby-comment"># You can check whether the buttons have been initialized with</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">ready?</span> <span class="ruby-comment"># =&gt; true</span>&#x000A;&#x000A;<span class="ruby-comment"># Basic input from buttons. With no argument, blocks until you press a button then returns an index</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_input</span> <span class="ruby-comment"># =&gt; 0</span>&#x000A;&#x000A;<span class="ruby-comment"># With an argument, it will timeout if no button is pressed.</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_input</span>(<span class="ruby-value">10</span>) <span class="ruby-comment"># =&gt; nil if no button is pressed for 10 seconds</span>&#x000A;&#x000A;<span class="ruby-comment"># It&#39;s also possible to get chords instead of single presses.</span>&#x000A;<span class="ruby-comment"># Specify the chord length and wait for simultaneous presses.</span>&#x000A;&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_multi_input</span>(<span class="ruby-value">2</span>) <span class="ruby-comment"># =&gt; [1, 2]</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_multi_input</span>(<span class="ruby-value">3</span>, <span class="ruby-value">10</span>) <span class="ruby-comment"># =&gt; nil || [0, 1, 3]</span>&#x000A;&#x000A;<span class="ruby-comment"># You can also record all button activity within a timeframe</span>&#x000A;&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_raw_input</span>(<span class="ruby-value">3</span>) <span class="ruby-comment"># =&gt; [[], [0], [0, 1]...]</span>&#x000A;&#x000A;<span class="ruby-comment"># Unexports GPIO and releases it for other use</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">release</span></pre>

<p>Usually, you&#39;ll use the buttons with a display component. Components (and other classes) may have their own defined button actions, and the Buttons class can access them.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">DummyComponent</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_display</span>&#x000A;    <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Dummy&quot;</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">button_actions</span>&#x000A;    [&#x000A;      <span class="ruby-operator">-&gt;</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Key1&quot;</span> },&#x000A;      <span class="ruby-operator">-&gt;</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Key2&quot;</span> },&#x000A;      <span class="ruby-operator">-&gt;</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Key3&quot;</span> },&#x000A;      <span class="ruby-operator">-&gt;</span> { <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Key4&quot;</span> }&#x000A;    ]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">c</span> = <span class="ruby-constant">DummyComponent</span>.<span class="ruby-identifier">new</span>&#x000A;&#x000A;<span class="ruby-comment"># First we have to display the component</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">show</span>(<span class="ruby-identifier">c</span>)&#x000A;&#x000A;<span class="ruby-comment"># Gets input, and runs the proc at the associated index.</span>&#x000A;<span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_press</span>&#x000A;<span class="ruby-comment"># e.g. Pressing &quot;Key1&quot; on the HAT runs c.button_actions[0].call</span></pre>

<h3 id="label-Converters">Converters<span><a href="#label-Converters">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The <code>Converter</code> class and its subclasses are used to transform input data into other forms, with the end goal of being able to display it on the EPD. Converters are used internally by Components to render their HTML, and are first-class displayables in and of themselves.</p>

<h4 id="label-Converter">Converter<span><a href="#label-Converter">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Abstract parent class for common functionality. It defines the overridable <code>#convert</code> method which is used by the <code>#convert!</code> method to produce the output.</p>

<h4 id="label-ImageConverter">ImageConverter<span><a href="#label-ImageConverter">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>ImageConverter</code> class can take images on disk, and through ImageMagick resize and convert them into 1-deep <code>.bmp</code> files suitable for display on the EPD.</p>

<pre class="ruby"><span class="ruby-comment"># Paths</span>&#x000A;<span class="ruby-identifier">i</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">ImageConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-string">&quot;/home/pi/img.png&quot;</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-comment"># File and Tempfile objects</span>&#x000A;<span class="ruby-identifier">j</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">ImageConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;/home/pi/img.png&quot;</span>)&#x000A;)&#x000A;&#x000A;<span class="ruby-comment"># Binary image data</span>&#x000A;<span class="ruby-identifier">k</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">ImageConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">&quot;/home/pi/img.png&quot;</span>)&#x000A;)&#x000A;&#x000A;<span class="ruby-identifier">i</span>.<span class="ruby-identifier">convert!</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">output</span> <span class="ruby-comment"># =&gt; Tempfile</span></pre>

<h4 id="label-DataUrlConverter">DataUrlConverter<span><a href="#label-DataUrlConverter">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>DataUrlConverter</code> converts an image input into a base64 encoded data url</p>

<pre class="ruby"><span class="ruby-comment"># Paths</span>&#x000A;<span class="ruby-identifier">d</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">DataUrlConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-string">&quot;/home/pi/img.png&quot;</span>,&#x000A;  <span class="ruby-value">format:</span> <span class="ruby-value">:path</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-comment"># File and Tempfile objects</span>&#x000A;<span class="ruby-identifier">e</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">DataUrlConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;/home/pi/img.png&quot;</span>),&#x000A;  <span class="ruby-value">format:</span> <span class="ruby-value">:file</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-comment"># Binary image data</span>&#x000A;<span class="ruby-identifier">f</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">DataUrlConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">&quot;/home/pi/img.png&quot;</span>),&#x000A;  <span class="ruby-value">format:</span> <span class="ruby-value">:binary</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-comment"># Base64 image data</span>&#x000A;<span class="ruby-identifier">g</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">DataUrlConverter</span>.<span class="ruby-identifier">new</span>(&#x000A;  <span class="ruby-value">input:</span> <span class="ruby-constant">SomeCode</span>.<span class="ruby-identifier">base64_image</span>,&#x000A;  <span class="ruby-value">format:</span> <span class="ruby-value">:base64</span>&#x000A;)&#x000A;&#x000A;<span class="ruby-identifier">d</span>.<span class="ruby-identifier">convert!</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">output</span> <span class="ruby-comment"># =&gt; &quot;data:image/png;base64,tldxz+pjHnQRDPFjkUUo3A...&quot;</span></pre>

<h4 id="label-HtmlConverter">HtmlConverter<span><a href="#label-HtmlConverter">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>HtmlConverter</code> takes in an HTML doc as input, and transforms it into an image using <a href="https://https://github.com/puppeteer/puppeteer">puppeteer</a>. This image is then piped through an <code>ImageConverter</code> so that it can be rendered on the EPD</p>

<pre class="ruby"><span class="ruby-identifier">html_doc</span> = <span class="ruby-identifier">&lt;&lt;DOC</span>&#x000A;<span class="ruby-value">&lt;html&gt;&#x000A;  &lt;head&gt;&lt;/head&gt;&#x000A;  &lt;body&gt;&#x000A;    &lt;p&gt;Happy Meal with Extra Happy&lt;/p&gt;&#x000A;  &lt;/body&gt;&#x000A;&lt;/html&gt;&#x000A;</span><span class="ruby-identifier">DOC</span>&#x000A;&#x000A;<span class="ruby-identifier">h</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span><span class="ruby-operator">::</span><span class="ruby-constant">HtmlConverter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">input:</span> <span class="ruby-identifier">html_doc</span>)&#x000A;&#x000A;<span class="ruby-identifier">h</span>.<span class="ruby-identifier">image_contents</span> <span class="ruby-comment"># =&gt; \&quot;BM\\xFE\\u0018\\u0000\\u0000\\u0000...&quot;</span></pre>

<h3 id="label-Components">Components<span><a href="#label-Components">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Components are composable views. They&#39;re written as ultra-basic ERB/HTML templates, with scaling applied to look good at the resolution of the EPD. These are then passed into the <code>HtmlConverter</code>. No writing or comprehension of HTML is necessary though, as you merely pass in options to the constructor.</p>

<p>You can provide options to the constructor with standard or block syntax.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Works this way&quot;</span>)&#x000A;&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">st</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">text</span> = <span class="ruby-string">&quot;Or this way&quot;</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>Passed in options can be retrieved through the options method, or defined accessors</p>

<pre class="ruby"><span class="ruby-identifier">c</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Text&quot;</span>)&#x000A;&#x000A;<span class="ruby-identifier">c</span>.<span class="ruby-identifier">options</span>[<span class="ruby-value">:text</span>] <span class="ruby-comment"># =&gt; &quot;Text&quot;</span></pre>

<p>Passing a second hash as a positional argument sets the keys/values as instance variables</p>

<pre class="ruby"><span class="ruby-identifier">i</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>.<span class="ruby-identifier">new</span>({<span class="ruby-value">body:</span> <span class="ruby-string">&quot;I have a name&quot;</span>}, { <span class="ruby-value">name:</span> <span class="ruby-string">&quot;Rachel&quot;</span> })&#x000A;&#x000A;<span class="ruby-identifier">i</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-comment"># =&gt; #&lt;Inkblot::Components::Component:0x... @name=&quot;Rachel&quot;, @options={:body=&gt;&quot;I have a name&quot;}&gt;</span></pre>

<p>You can also compose components by passing them to <code>Component.create</code> method, which will combine the fragments together into a single page, top to bottom.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>.<span class="ruby-identifier">create</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cpt</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">cpt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Several&quot;</span>)&#x000A;  <span class="ruby-identifier">cpt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Different&quot;</span>)&#x000A;  <span class="ruby-identifier">cpt</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-string">&quot;Components&quot;</span>)&#x000A;<span class="ruby-keyword">end</span></pre>

<pre>&lt;!DOCTYPE html&gt;&#x000A;&lt;html&gt;&#x000A;  &lt;head&gt;&#x000A;  &lt;/head&gt;&#x000A;  &lt;body style=&quot;height: 176px; width: 264px;&quot;&gt;&#x000A;    &lt;div style=&quot;...&quot;&gt;&#x000A;      &lt;h1 style=&quot;font-family: monospace; &quot;&gt;Several&lt;/h1&gt;&#x000A;    &lt;/div&gt;&#x000A;&#x000A;    &lt;div style=&quot;...&quot;&gt;&#x000A;      &lt;h1 style=&quot;font-family: monospace; &quot;&gt;Different&lt;/h1&gt;&#x000A;    &lt;/div&gt;&#x000A;&#x000A;    &lt;div style=&quot;...&quot;&gt;&#x000A;      &lt;h1 style=&quot;font-family: monospace; &quot;&gt;Components&lt;/h1&gt;&#x000A;    &lt;/div&gt;&#x000A;  &lt;/body&gt;&#x000A;&lt;/html&gt;</pre>

<h3 id="label-Built-in+Components">Built-in Components<span><a href="#label-Built-in+Components">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h4 id="label-Base+Component">Base Component<span><a href="#label-Base+Component">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>Component</code> class is the superclass of all other components, as well as a component itself. Components have a <code>#options</code> method, a hash containing their customization options. The base component has only one relevant option, its body.</p>

<pre class="ruby">&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">body:</span> <span class="ruby-string">%q(&lt;h1&gt;A Simple Component&lt;/h1&gt;)</span>)&#x000A;&#x000A;<span class="ruby-comment"># You can also set width and height on any component like so</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">%q(&lt;p&gt;small text&lt;/p&gt;)</span>&#x000A;&#x000A;  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">div_height</span> = <span class="ruby-value">100</span> <span class="ruby-comment"># height: 100%</span>&#x000A;  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">div_width</span> = <span class="ruby-string">&#39;500px&#39;</span> <span class="ruby-comment"># width: 500px</span>&#x000A;  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">div_height</span> = <span class="ruby-value">:full</span> <span class="ruby-comment"># height = Display.size[:height]</span>&#x000A;  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">fullscreen</span> = <span class="ruby-keyword">true</span> <span class="ruby-comment"># Same as c.div_height = c.div_width = :full</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<p>Other components subclass from this, and have their own customization options. Composed components from <code>Component.create</code> are instances of the base component class.</p>

<h4 id="label-SimpleText">SimpleText<span><a href="#label-SimpleText">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>SimpleText</code> class allows you to do just that, simple text. Sizing can be set explicitly or automatically, as can fonts.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">st</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">text</span> = <span class="ruby-string">&quot;Example Text&quot;</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">border_size</span> = <span class="ruby-value">10</span> <span class="ruby-comment"># Adds an inner border</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">size</span> = <span class="ruby-value">:large</span> <span class="ruby-comment"># :tiny, :small, :medium, :large or an integer for px</span>&#x000A;  <span class="ruby-comment"># Takes in an array of font names and includes them</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">gfonts</span> = [<span class="ruby-string">&#39;Roboto&#39;</span>, <span class="ruby-string">&#39;Open Sans&#39;</span>, <span class="ruby-string">&#39;Jost&#39;</span>, <span class="ruby-string">&#39;Pangolin&#39;</span>]&#x000A;  <span class="ruby-comment"># Also works with built in fonts like Helvetica</span>&#x000A;  <span class="ruby-identifier">st</span>.<span class="ruby-identifier">font</span> = <span class="ruby-string">&quot;Pangolin&quot;</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-FullScreenImage">FullScreenImage<span><a href="#label-FullScreenImage">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>FullScreenImage</code> class displays images. You can pass a variety of image sources in, and it works with other components for nesting and resizing. Images are automatically resized and downsampled.</p>

<pre class="ruby"><span class="ruby-comment"># Sets the img tag src to the url</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fsi</span><span class="ruby-operator">|</span> &#x000A;  <span class="ruby-identifier">fsi</span>.<span class="ruby-identifier">url</span> = <span class="ruby-string">&quot;https://live.staticflickr.com/2753/4177140189_f5fd431b26_o_d.jpg&quot;</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-comment"># Sets the img tag src to the absolute version of the path</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">path:</span> <span class="ruby-string">&quot;/home/pi/img.jpg&quot;</span>)&#x000A;&#x000A;<span class="ruby-comment"># Sets the img tag src as a data url from reading the file</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">file:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;/home/pi/img.jpg&quot;</span>))&#x000A;&#x000A;<span class="ruby-comment"># Sets the img tag src as a data url from the file contents themselves</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">binary:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">&quot;/home/pi/img.jpg&quot;</span>))</pre>

<h4 id="label-QrCode">QrCode<span><a href="#label-QrCode">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>QrCode</code> class can generate and render QR Codes to the screen, great for small area and two-channel color.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">QrCode</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">qr</span><span class="ruby-operator">|</span> &#x000A;  <span class="ruby-identifier">qr</span>.<span class="ruby-identifier">message</span> = <span class="ruby-string">&quot;http://justinp.io/&quot;</span>&#x000A;  <span class="ruby-identifier">qr</span>.<span class="ruby-identifier">margin_top</span> = <span class="ruby-identifier">qr</span>.<span class="ruby-identifier">margin_left</span> = <span class="ruby-value">-5</span> <span class="ruby-comment"># adds a -5% margin</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-BarCode">BarCode<span><a href="#label-BarCode">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>BarCode</code> class can generate and render EAN-13 style barcodes.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">BarCode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">code:</span> <span class="ruby-string">&quot;123123123123&quot;</span>)</pre>

<h4 id="label-TableList">TableList<span><a href="#label-TableList">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>TableList</code> class displays up to 4 line items in a horizontal table view. If you supply fewer than 4 items, blank entries are produced to keep 4 lines.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">TableList</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tl</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">tl</span>.<span class="ruby-identifier">items</span> = [<span class="ruby-string">&#39;Apples&#39;</span>, <span class="ruby-string">&#39;Pears&#39;</span>, <span class="ruby-string">&#39;Oranges&#39;</span>, <span class="ruby-string">&#39;Bananas&#39;</span>]&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-IconGroup">IconGroup<span><a href="#label-IconGroup">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>An IconGroup</code> is a grid of icons / images to display horizontally next to each other. Column count is customizable, rows are subsequently determined by amount of content. “`ruby Inkblot::Components::IconGroup.new do |ig|  ig.icons = []</p>

<p># Standard HTML symbols work  ig.icons &lt;&lt; :uarr  # Google Material Icons symbols as well  ig.icons &lt;&lt; :android  # Simple strings work  ig.icons &lt;&lt; &#39;A&#39;  # As do components, especially FullScreenImages  ig.icons &lt;&lt; <a href="../classes/Inkblot/Components/FullScreenImage.html#method-c-new"><code>Inkblot::Components::FullScreenImage.new</code></a>(  path: <a href="../classes/Inkblot.html#method-c-vendor_path"><code>Inkblot.vendor_path</code></a>(&#39;chris_kim.bmp&#39;)  )</p>

<p>ig.icon_size = 40 # Default  ig.font = &#39;Material Icons, monospace&#39; # Default  ig.columns = 4 # Default end “`</p>

<h4 id="label-IconPane">IconPane<span><a href="#label-IconPane">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>An <code>IconPane</code> is a two-column layout with icons on the left, and a large rectangular frame on the right. Other components can be placed in the right-hand frame.</p>

<pre class="ruby"><span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">IconPane</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ic</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-comment"># This symbol is equivalent to %i[nwarr larr swarr swarr]</span>&#x000A;  <span class="ruby-comment"># Other icon group presets include :arrows_out, :select, and :agree / :cancel</span>&#x000A;  <span class="ruby-comment"># You can also pass strings, or symbols which are considered html symbols</span>&#x000A;  <span class="ruby-identifier">ic</span>.<span class="ruby-identifier">icons</span> = <span class="ruby-value">:arrows_in</span> &#x000A;&#x000A;  <span class="ruby-comment"># A single object or an array works here. Arrays are composed with `Component.create`</span>&#x000A;  <span class="ruby-identifier">ic</span>.<span class="ruby-identifier">frame_contents</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fc</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">fc</span>.<span class="ruby-identifier">path</span> = <span class="ruby-constant">Inkblot</span>.<span class="ruby-identifier">vendor_path</span>(<span class="ruby-string">&#39;chris_kim.bmp&#39;</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-ScrollMenu">ScrollMenu<span><a href="#label-ScrollMenu">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>The <code>ScrollMenu</code> can be used for selecting from a list of items, and includes a view and button actions to accomplish this</p>

<pre class="ruby"><span class="ruby-identifier">scroll_menu</span> = <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">ScrollMenu</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sc</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">sc</span>.<span class="ruby-identifier">items</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">10</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;Option #{x}&quot;</span> }&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-comment"># Scroll menu has 4 states: :scroll, :select, :answered, and :canceled</span>&#x000A;<span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">state</span> <span class="ruby-comment"># =&gt; :scroll</span>&#x000A;&#x000A;<span class="ruby-comment"># Scroll menu also has pages of content divided into fours</span>&#x000A;<span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">current_page</span> <span class="ruby-comment"># =&gt; 0</span>&#x000A;<span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">page_count</span> <span class="ruby-comment"># =&gt; 3</span>&#x000A;&#x000A;<span class="ruby-comment"># Using the menu as User prompting is simple</span>&#x000A;<span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">show</span>(<span class="ruby-identifier">scroll_menu</span>) <span class="ruby-comment"># Display the component initially</span>&#x000A;&#x000A;<span class="ruby-keyword">until</span> <span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">concluded?</span> <span class="ruby-comment"># True when canceled or answered</span>&#x000A;  <span class="ruby-comment"># Contains the 4 presented options</span>&#x000A;  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;User can see #{scroll_menu.choices.map { |x| %Q(&quot;#{x}&quot;) }.join(&#39;,&#39;) }&quot;</span>&#x000A;  <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Buttons</span>.<span class="ruby-identifier">get_press</span> <span class="ruby-comment"># Defers to ScrollMenu&#39;s #button_actions method</span>&#x000A;  <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Display</span>.<span class="ruby-identifier">again</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">concluded?</span> <span class="ruby-comment"># Show it again</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">scroll_menu</span>.<span class="ruby-identifier">answer</span> <span class="ruby-comment"># =&gt; One of the options, or nil if canceled</span></pre>

<h3 id="label-Creating+new+Components">Creating new Components<span><a href="#label-Creating+new+Components">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Components are subclasses of <code>Inkblot::Components::Component</code>, which gives them all common behavior around generating their HTML representations. You can create subclasses of Component if you want to create customized views and behaviors, or if you want to go outside of the HTML template model but still use the Display / Buttons functions.</p>

<p>Components optionally override the <code>#computed</code> method. This method allows options to be calculated at render time by returning a hash of program-defined options merged into the user defined ones.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">computed</span>&#x000A;  {&#x000A;    <span class="ruby-value">element_name:</span> <span class="ruby-identifier">lookup_name</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:element</span>]),&#x000A;    <span class="ruby-value">element_weight:</span> <span class="ruby-identifier">lookup_weight</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:element</span>])&#x000A;  }&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-Templates">Templates<span><a href="#label-Templates">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>A Template is an ERB file, like a rails view partial. The built-in components store their templates in a common directory within the gem&#39;s vendor directory, and name them after the class. You can load custom templates either by passing them in as class arguments</p>

<pre class="ruby"><span class="ruby-comment"># Pass a base folder as a class option to a generic component</span>&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">MyUniqueComponent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-comment"># ...</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">user_info</span> = { <span class="ruby-value">first_name:</span> <span class="ruby-string">&quot;Erek&quot;</span>, <span class="ruby-value">last_name:</span> <span class="ruby-string">&quot;King&quot;</span>}&#x000A;&#x000A;<span class="ruby-identifier">muc</span> = <span class="ruby-constant">MyUniqueComponent</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_info</span>, { <span class="ruby-value">template_base_path:</span> <span class="ruby-string">&quot;/path/to/my/templates&quot;</span> }) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mc</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">mc</span>.<span class="ruby-identifier">full_name</span> = [<span class="ruby-identifier">mc</span>.<span class="ruby-identifier">first_name</span>, <span class="ruby-identifier">mc</span>.<span class="ruby-identifier">last_name</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">muc</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:template_full_path</span>) <span class="ruby-comment"># =&gt; &quot;/path/to/my/templates/MyUniqueComponent.html.erb&quot;</span>&#x000A;&#x000A;<span class="ruby-comment"># You can also override the filename</span>&#x000A;&#x000A;<span class="ruby-identifier">muc2</span> = <span class="ruby-constant">MyUniqueComponent</span>.<span class="ruby-identifier">new</span>(&#x000A;  {}, &#x000A;  {&#x000A;    <span class="ruby-value">template_base_path:</span> <span class="ruby-string">&quot;/new/templates&quot;</span>&#x000A;    <span class="ruby-identifier">template_filename</span><span class="ruby-operator">:</span></pre>

<p>Or by creating a new root object to base your components off of</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">ParentComponent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  &#x000A;  <span class="ruby-identifier">private</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">template_base_path</span>&#x000A;    <span class="ruby-ivar">@template_base_path</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;/path/to/my/templates&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">MyFirstComponent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ParentComponent</span>&#x000A;  <span class="ruby-comment"># ...</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">MySecondComponent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ParentComponent</span>&#x000A;  <span class="ruby-comment"># ...</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-constant">MyFirstComponent</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:template_path</span>) <span class="ruby-comment"># =&gt; &quot;/path/to/my/templates/MyFirstComponent.html.erb&quot;</span>&#x000A;<span class="ruby-constant">MySecondComponent</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:template_path</span>) <span class="ruby-comment"># =&gt; &quot;/path/to/my/templates/MySecondComponent.html.erb&quot;</span>&#x000A;&#x000A;<span class="ruby-constant">MyFirstComponent</span>.<span class="ruby-identifier">new</span>({}, { <span class="ruby-value">template_filename:</span> <span class="ruby-string">&quot;SpecialComponent.html.erb&quot;</span>}).<span class="ruby-identifier">send</span>(<span class="ruby-value">:template_path</span>)&#x000A;<span class="ruby-comment"># =&gt; &quot;/path/to/my/templates/SpecialComponent.html.erb&quot;</span></pre>

<pre class="ruby"><span class="ruby-comment"># Overriding the template_full_path method entirely</span>&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">MyNewComponent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">template_path</span>&#x000A;    <span class="ruby-string">&quot;/path/to/my/templates/NewComponentTemplate.html.erb&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">mnc_tmp</span> = <span class="ruby-constant">MyNewComponent</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">template</span>&#x000A;<span class="ruby-identifier">fil</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-string">&quot;/path/to/my/templates/NewComponentTemplate.html.erb&quot;</span>)&#x000A;&#x000A;<span class="ruby-identifier">mnc_tmp</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">fil</span> <span class="ruby-comment"># =&gt; true</span></pre>

<p>Components expect that they come with an HTML Template and should produce a bmp version of it for the display. If your components don&#39;t intend to use HTML templates, you can still output them to the screen by overriding the <code>#convert</code> function</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">PhotoFrame</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-comment"># ...</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">convert</span>&#x000A;    <span class="ruby-comment"># Return any converter, or elsewise displayable object here</span>&#x000A;    <span class="ruby-constant">ImageConverter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">input:</span> <span class="ruby-identifier">binary_img_data</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>

<h4 id="label-Helpers">Helpers<span><a href="#label-Helpers">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Helper classes share common behavior across components. They&#39;re nothing more than modules, with extendable and inheritable methods for Components.</p>

<h5 id="label-Icons">Icons<span><a href="#label-Icons">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>The <code>Icons</code> helper assists with converting symbols to icons, both standard HTML symbols and <a href="https://google.github.io/material-design-icons/">Google Material Design Icons</a> codepoints.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;inkblot/components/helpers/icons&#39;</span>&#x000A;&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">AccessIndicator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-identifier">include</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">Icons</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_display</span>&#x000A;    <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">FullScreenImage</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">im</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">im</span>.<span class="ruby-identifier">fullscreen</span> = <span class="ruby-keyword">true</span>&#x000A;      <span class="ruby-identifier">im</span>.<span class="ruby-identifier">size</span> = <span class="ruby-value">80</span>&#x000A;      <span class="ruby-identifier">im</span>.<span class="ruby-identifier">font</span> = <span class="ruby-string">&#39;Material Icons&#39;</span>&#x000A;      <span class="ruby-identifier">im</span>.<span class="ruby-identifier">text</span> = <span class="ruby-identifier">icon_span</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lock</span>&#x000A;    <span class="ruby-identifier">options</span>[<span class="ruby-value">:locked</span>] = <span class="ruby-keyword">true</span>&#x000A;    <span class="ruby-keyword">self</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unlock</span>&#x000A;    <span class="ruby-identifier">options</span>[<span class="ruby-value">:locked</span>] = <span class="ruby-keyword">false</span>&#x000A;    <span class="ruby-keyword">self</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">locked?</span>&#x000A;    <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:locked</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">display_icon</span>&#x000A;    <span class="ruby-identifier">icn</span> = <span class="ruby-identifier">locked?</span> <span class="ruby-operator">?</span> <span class="ruby-value">:lock</span> <span class="ruby-operator">:</span> <span class="ruby-value">:lock_open</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">icon_span</span>&#x000A;    <span class="ruby-node">%(&lt;span&gt;#{html_icon_sym(display_icon)}&lt;/span&gt;)</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">indi</span> = <span class="ruby-constant">AccessIndicator</span>.<span class="ruby-identifier">new</span>&#x000A;&#x000A;<span class="ruby-identifier">indi</span>.<span class="ruby-identifier">locked?</span> <span class="ruby-comment"># =&gt; false</span>&#x000A;<span class="ruby-identifier">indi</span>.<span class="ruby-identifier">icon_span</span> <span class="ruby-comment"># =&gt; &lt;span&gt;&amp;#xE898;&lt;/span&gt;</span>&#x000A;&#x000A;<span class="ruby-identifier">indi</span>.<span class="ruby-identifier">lock</span>.<span class="ruby-identifier">locked?</span> <span class="ruby-comment"># =&gt; true</span>&#x000A;<span class="ruby-identifier">indi</span>.<span class="ruby-identifier">icon_span</span> <span class="ruby-comment"># =&gt; &lt;span&gt;&amp;#xE897;&lt;/span&gt;</span></pre>

<h5 id="label-Paginated">Paginated<span><a href="#label-Paginated">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>The <code>Paginated</code> helper deals with content that has multiple subsequent views. You must define a method which sets up this pagination, and returns an integer page count</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;inkblot/components/helpers/paginated&#39;</span>&#x000A;&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">SlideShow</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-identifier">include</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">Paginated</span>&#x000A;&#x000A;  <span class="ruby-comment"># Must return the page count</span>&#x000A;  <span class="ruby-identifier">paginate_with</span> <span class="ruby-value">:pagify</span>&#x000A;  <span class="ruby-comment"># Defaults to zero, but can be overridden</span>&#x000A;  <span class="ruby-identifier">start_page</span> <span class="ruby-value">0</span>&#x000A;&#x000A;  <span class="ruby-comment"># More work could be done here to set up the pages themselves</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pagify</span>&#x000A;    <span class="ruby-identifier">options</span>[<span class="ruby-value">:slides</span>].<span class="ruby-identifier">count</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-comment"># Override to display different content depending on the page</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_display</span>&#x000A;    <span class="ruby-identifier">options</span>[<span class="ruby-value">:slides</span>][<span class="ruby-identifier">current_page</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">s</span> = <span class="ruby-constant">SlideShow</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sh</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">sh</span>.<span class="ruby-identifier">fullscreen</span> = <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-identifier">sh</span>.<span class="ruby-identifier">slides</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">10</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">text:</span> <span class="ruby-node">&quot;Slide #{n}&quot;</span>, <span class="ruby-value">border_size:</span> <span class="ruby-value">10</span>, <span class="ruby-value">div_height:</span> <span class="ruby-value">95</span>, <span class="ruby-value">div_width:</span> <span class="ruby-value">95</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">page_count</span> <span class="ruby-comment"># =&gt; 10</span>&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">current_page</span> <span class="ruby-comment"># =&gt; 0</span>&#x000A;&#x000A;<span class="ruby-comment"># Page navigation</span>&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">prev_page</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">current_page</span> <span class="ruby-comment"># =&gt; 0, won&#39;t go negative</span>&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">next_page</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">current_page</span> <span class="ruby-comment"># =&gt; 1</span>&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">current_page</span> = (<span class="ruby-identifier">s</span>.<span class="ruby-identifier">page_count</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-comment"># Can directly set as well</span>&#x000A;<span class="ruby-identifier">s</span>.<span class="ruby-identifier">next_page</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">current_page</span> <span class="ruby-comment"># =&gt; 9, won&#39;t go out of bounds</span></pre>

<h5 id="label-MultiState">MultiState<span><a href="#label-MultiState">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>The <code>MultiState</code> helper assists with defining and transitioning between enumerated states for content. States are defined via a class method, and the current state can be read/written. A different collection is maintained for each state.</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;inkblot/components/helpers/multi_state&#39;</span>&#x000A;&#x000A;<span class="ruby-keyword">class</span> <span class="ruby-constant">TrafficLight</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Inkblot</span><span class="ruby-operator">::</span><span class="ruby-constant">Components</span><span class="ruby-operator">::</span><span class="ruby-constant">Component</span>&#x000A;  <span class="ruby-identifier">def_states</span> <span class="ruby-value">:green</span>, <span class="ruby-value">:yellow</span>, <span class="ruby-value">:red</span>&#x000A;  <span class="ruby-identifier">default_state</span> <span class="ruby-value">:red</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>&#x000A;    <span class="ruby-keyword">super</span>&#x000A;    <span class="ruby-comment"># &quot;Setter&quot; mode, set the content to the block&#39;s return value</span>&#x000A;    <span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:green</span>) { <span class="ruby-string">&quot;#00FF00&quot;</span> }&#x000A;    <span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:yellow</span>) { <span class="ruby-string">&quot;#FFFF00&quot;</span> }&#x000A;    <span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:red</span>) { <span class="ruby-string">&quot;#FF0000&quot;</span> }&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">transition_state</span>&#x000A;    <span class="ruby-keyword">case</span> <span class="ruby-identifier">state</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:green</span>&#x000A;      <span class="ruby-identifier">state</span> = <span class="ruby-value">:yellow</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:yellow</span>&#x000A;      <span class="ruby-identifier">state</span> = <span class="ruby-value">:red</span>&#x000A;    <span class="ruby-keyword">when</span> <span class="ruby-value">:red</span>&#x000A;      <span class="ruby-identifier">state</span> = <span class="ruby-value">:green</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;&#x000A;    <span class="ruby-keyword">self</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">private</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">computed</span>&#x000A;    <span class="ruby-comment"># &quot;Getter&quot; mode, implicitly uses the state method if no state is given</span>&#x000A;    { <span class="ruby-value">hex_color:</span> <span class="ruby-identifier">content_for_state</span> }&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">t</span> = <span class="ruby-constant">TrafficLight</span>.<span class="ruby-identifier">new</span>&#x000A;&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:green</span>) <span class="ruby-comment"># =&gt; &quot;#00FF00&quot;</span>&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:yellow</span>) <span class="ruby-comment"># =&gt; &quot;#FFFF00&quot;</span>&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">content_for_state</span>(<span class="ruby-value">:red</span>) <span class="ruby-comment"># =&gt; &quot;#FF0000&quot;</span>&#x000A;&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">state</span> <span class="ruby-comment"># =&gt; :red</span>&#x000A;&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">transition_state</span>.<span class="ruby-identifier">state</span> <span class="ruby-comment"># =&gt; :green</span>&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">transition_state</span>.<span class="ruby-identifier">state</span> <span class="ruby-comment"># =&gt; :yellow</span>&#x000A;<span class="ruby-identifier">t</span>.<span class="ruby-identifier">transition_state</span>.<span class="ruby-identifier">state</span> <span class="ruby-comment"># =&gt; :red</span></pre>

<h2 id="label-Contributing">Contributing<span><a href="#label-Contributing">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Bug reports, feature ideas, and pull requests are welcome on GitHub at <a href="https://github.com/jtp184/inkblot">github.com/jtp184/inkblot</a></p>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
